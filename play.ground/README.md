# ğŸŒ Xon Playground

Web-based playground for testing Xon configuration language in real-time.

## ğŸš€ Quick Start

```bash
# 1. Install Emscripten (one-time setup)
cd ~/xon/play.ground
chmod +x setup_emscripten.sh
./setup_emscripten.sh

# 2. Install Node.js dependencies
npm install

# 3. Verify setup
./verify.sh

# 4. Build WASM & start server
npm run dev

# Or run separately:
npm run build    # Build WASM
npm start        # Start server (auto-opens browser)
```

## ğŸ“¦ NPM Scripts

| Command | Description |
|---------|-------------|
| `npm install` | Install dependencies (http-server) |
| `npm start` | Start dev server on http://localhost:8000 |
| `npm run build` | Build WASM from C source |
| `npm run verify` | Verify project setup |
| `npm run dev` | Build + Start (full workflow) |

## ğŸ“ Files

- `index.html` - Playground UI with CodeMirror editor
- `xon-wrapper.js` - JavaScript parser wrapper
- `xon.js` + `xon.wasm` - Compiled WASM (generated by build script)
- `build_wasm.sh` - Emscripten build script
- `verify.sh` - Setup verification script
- `package.json` - Node.js dependencies and scripts

## ğŸ› ï¸ Development

```bash
# Watch for changes and rebuild
npm run build && npm start

# Or use a file watcher (install nodemon first)
npm install -g nodemon
nodemon --watch ../src --ext c,lemon --exec "npm run build"
```

## ğŸŒ Deploy

### GitHub Pages

```bash
# 1. Build WASM
npm run build

# 2. Commit files
git add .
git commit -m "Update playground"
git push

# 3. Enable Pages in repo settings
# - Go to Settings â†’ Pages
# - Source: Deploy from branch
# - Branch: main
# - Folder: /play.ground
```

### Netlify

```bash
# 1. Build WASM
npm run build

# 2. Deploy
# Method A: Drag play.ground folder to Netlify
# Method B: Connect GitHub repo
#   - Build command: cd play.ground && npm run build
#   - Publish directory: play.ground
```

### Vercel

```bash
# 1. Install Vercel CLI
npm install -g vercel

# 2. Deploy
cd play.ground
vercel

# Or add vercel.json:
# {
#   "buildCommand": "npm run build",
#   "outputDirectory": "."
# }
```

## ğŸ§ª Features

- âœ… Real-time parsing using Xon C lexer/parser compiled to WASM
- âœ… Syntax highlighting with CodeMirror
- âœ… Example code snippets (basic, nested, comments, hex)
- âœ… Error reporting with line numbers
- âœ… AST visualization in JSON format
- âœ… Auto-parse on Ctrl+Enter
- âœ… No backend required - runs entirely in browser

## ğŸ› Troubleshooting

### WASM fails to load
```bash
# Rebuild WASM
npm run build

# Check files exist
ls -lh xon.js xon.wasm
```

### CodeMirror not loading
- Check internet connection (loads from CDN)
- Or download CodeMirror locally

### Port 8000 already in use
```bash
# Change port in package.json
"start": "http-server -p 3000 -c-1 -o"
```

## ğŸ“š Project Structure

```
xon/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.c
â”‚   â”œâ”€â”€ lexer.c
â”‚   â”œâ”€â”€ lexer.h
â”‚   â”œâ”€â”€ xon.lemon
â”‚   â””â”€â”€ xon_api.c
â”œâ”€â”€ build/
â”‚   â”œâ”€â”€ xon.c       (generated by lemon)
â”‚   â”œâ”€â”€ xon.h       (generated by lemon)
â”‚   â””â”€â”€ xon.out     (lemon output)
â”œâ”€â”€ include/
â”‚   â””â”€â”€ xon.h       (public API)
â”œâ”€â”€ tools/
â”‚   â””â”€â”€ lemon       (parser generator)
â”œâ”€â”€ play.ground/    â† You are here
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ xon-wrapper.js
â”‚   â”œâ”€â”€ build_wasm.sh
â”‚   â”œâ”€â”€ verify.sh
â”‚   â”œâ”€â”€ setup_emscripten.sh
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ node_modules/   (gitignored)
â”‚   â”œâ”€â”€ xon.js          (generated - gitignored)
â”‚   â”œâ”€â”€ xon.wasm        (generated - gitignored)
â”‚   â””â”€â”€ README.md       (this file)
â”œâ”€â”€ build.sh
â””â”€â”€ README.md
```

## ğŸ”§ Requirements

- **Emscripten** (for building WASM)
- **Node.js** v14+ (for http-server)
- **Lemon** parser generator (included in `tools/`)

## ğŸ“– Learn More

- [Xon Language Spec](../README.md)
- [Emscripten Documentation](https://emscripten.org/)
- [WebAssembly Guide](https://webassembly.org/)

## ğŸ“„ License

MIT License - see [LICENSE](../LICENSE) for details
```